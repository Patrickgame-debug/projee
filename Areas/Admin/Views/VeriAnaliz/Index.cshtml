@using E_Ticaret.Models.Entities
@model List<KullaniciHarcamaModel>
@{
    ViewData["Title"] = "Genel Satış Özeti";
}

<h2 class="mb-4">Genel Satış Özeti</h2>
<div class="row mb-4">
    <div class="col-xl-3 col-md-6">
        <div class="card bg-primary text-white mb-4">
            <div class="card-body">Toplam Müşteri Sayısı</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/MusteriDetay">View Details</a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-warning text-white mb-4">
            <div class="card-body">Toplam Satış Tutarı</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/SatisDetay">View Details</a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-success text-white mb-4">
            <div class="card-body">En Çok Satan Ürün</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/UrunDetay">View Details</a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-danger text-white mb-4">
            <div class="card-body">Ortalama Sipariş Değeri</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/GenelDetay">View Details</a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>
</div>
<div class="row mb-4">
    <div class="col-xl-3 col-md-6">
        <div class="card bg-info text-white mb-4">
            <div class="card-body">Ürün Önerileri (AI)</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/GenelUrunOnerisi">View Details</a>
                <div class="small text-white"><i class="fas fa-robot"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-info text-white mb-4">
            <div class="card-body">Kampanya Önerileri (AI)</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/KampanyaOneri">View Details</a>
                <div class="small text-white"><i class="fas fa-robot"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-secondary text-white mb-4">
            <div class="card-body">Satış Tahmini (7 Gün)</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/SatisTahminRaporu">View Details</a>
                <div class="small text-white"><i class="fas fa-chart-line"></i></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-dark text-white mb-4">
            <div class="card-body">Genel Durum Analizi (AI)</div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" href="/Admin/VeriAnaliz/GenelDurumAnalizi">View Details</a>
                <div class="small text-white"><i class="fas fa-chart-line"></i></div>
            </div>
        </div>
    </div>
</div>
<div class="card mb-5">
    <div class="card-header bg-secondary text-white">
        <i class="fas fa-users me-1"></i> Müşteriler
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table id="kullaniciTablo" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Ad Soyad</th>
                        <th>Kayıt Tarihi</th>
                        <th>Toplam Harcama (₺)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.AdSoyad</td>
                            <td>@item.KayitTarihi?.ToString("dd.MM.yyyy")</td>
                            <td>@item.ToplamHarcama.ToString("C2")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
    <link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            $('#kullaniciTablo').DataTable({
                pageLength: 8,
                language: {
                    search: "Ara:",
                    lengthMenu: "Sayfada _MENU_ kayıt göster",
                    info: "_TOTAL_ kayıttan _START_ - _END_ arası gösteriliyor",
                    paginate: {
                        first: "İlk",
                        last: "Son",
                        next: "Sonraki",
                        previous: "Önceki"
                    },
                    zeroRecords: "Eşleşen kayıt bulunamadı",
                    infoEmpty: "Gösterilecek kayıt yok"
                }
            });
        });
    </script>
}
